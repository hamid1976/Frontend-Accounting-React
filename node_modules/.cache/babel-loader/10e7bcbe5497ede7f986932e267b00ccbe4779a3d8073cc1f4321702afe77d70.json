{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Logic-Unit\\\\my-account\\\\src\\\\components\\\\AccountsReceivable\\\\RecordPaymentModal.jsx\",\n  _s = $RefreshSig$();\n// import { useState, useEffect } from 'react';\n// import { Modal, DatePicker, Input, Select, Button, Spin } from 'antd';\n// import { formatCurrency } from '../../Utility/formatters';\n\n// // Properly destructure all needed components from Select\n// const { Option, OptGroup } = Select;\n\n// const RecordPaymentModal = ({ invoiceId, amount, onClose, onSubmit }) => {\n//    console.log('RecordPaymentModal props:', { invoiceId, amount, onClose, onSubmit });\n//   const [date, setDate] = useState(null);  \n//   const [enteredAmount, setEnteredAmount] = useState('');\n//   const [method, setMethod] = useState('');\n//   const [account, setAccount] = useState('');\n//   const [memo, setMemo] = useState('');\n//   const [accounts, setAccounts] = useState([]);\n//   const [loading, setLoading] = useState(false);\n\n//   useEffect(()=>{\n//    setEnteredAmount(amount.toString());\n//   },[amount])\n//   // Use the amount prop directly instead of fetching from API\n//   useEffect(() => {\n//     if (amount) {\n//       setEnteredAmount(amount.toString());\n//     }\n//   }, [amount]);\n\n//   // Fetch accounts as before\n//   useEffect(() => {\n//     const fetchAccounts = async () => {\n//       try {\n//         const response = await fetch('http://localhost:8080/api/accounts');\n//         const data = await response.json();\n\n//         // Only asset accounts\n//         const assetAccounts = data.filter(acct => acct.type === 'assets');\n\n//         // Build parent-child map\n//         const accountMap = {};\n//         assetAccounts.forEach(acct => accountMap[acct.id] = { ...acct, children: [] });\n\n//         assetAccounts.forEach(acct => {\n//           if (acct.parentId && accountMap[acct.parentId]) {\n//             accountMap[acct.parentId].children.push(accountMap[acct.id]);\n//           }\n//         });\n\n//         // Top-level accounts\n//         const tree = assetAccounts.filter(acct => !acct.parentId || !accountMap[acct.parentId]);\n//         setAccounts(tree);\n//       } catch (err) {\n//         console.error('Failed to fetch accounts:', err);\n//       }\n//     };\n\n//     fetchAccounts();\n//   }, []);\n\n//   const handleSubmit = () => {\n//     if (!date || !enteredAmount || !method || !account) return;\n//     onSubmit(date, parseFloat(enteredAmount), method, account, memo);\n//     onClose();\n//   };\n\n//   return (\n//     <Modal\n//       title={`Record Payment for Invoice ${invoiceId}`}\n//       open={true}\n//       onCancel={onClose}\n//       footer={[\n//         <Button key=\"cancel\" onClick={onClose}>\n//           Close\n//         </Button>\n//       ]}\n//     >\n//       <div className=\"space-y-4\">\n//         <div>\n//           <label className=\"text-gray-700\">Date</label>\n//           <DatePicker \n//             className=\"w-full\"\n//             value={date}\n//             onChange={(val) => setDate(val)}\n//           />\n//         </div>\n//         <div>\n//           <label className=\"text-gray-700\">Amount</label>\n//           <Input\n//             value={enteredAmount} \n//             onChange={(e) => setEnteredAmount(e.target.value)}\n//             prefix={<span className=\"text-gray-500\">Rs</span>}\n//           />\n//           <div className=\"text-sm text-gray-500\">\n\n//             Remaining amount: {formatCurrency(amount - (parseFloat(enteredAmount) || 0))}\n//           </div>\n//         </div>\n\n//         <div>\n//           <label className=\"text-gray-700\">Payment Method</label>\n//           <Select value={method} onChange={setMethod} className=\"w-full\">\n//             <Option value=\"cash\">Cash</Option>\n//             <Option value=\"check\">Check</Option>\n//             <Option value=\"eft\">Bank/Electronic Funds</Option>\n//             <Option value=\"credit\">Credit Card</Option> \n//           </Select>\n//         </div>\n//         <div>\n//           <label className=\"text-gray-700\">Deposit Account</label>\n//           <Select\n//             value={account}\n//             onChange={setAccount}\n//             showSearch\n//             filterOption={(input, option) =>\n//               (option?.children ?? '').toLowerCase().includes(input.toLowerCase())\n//             }\n//             className=\"w-full\"\n//           >\n//             {accounts.map(parent =>\n//               parent.children.length > 0 ? (\n//                 <OptGroup key={parent.id} label={`${parent.code} - ${parent.name}`}>\n//                   {parent.children.map(child => (\n//                     <Option key={child.id} value={child.id}>\n//                       {child.code} - {child.name}\n//                     </Option>\n//                   ))}\n//                 </OptGroup>\n//               ) : (\n//                 <Option key={parent.id} value={parent.id}>\n//                   {parent.code} - {parent.name}\n//                 </Option>\n//               )\n//             )}\n//           </Select>\n//         </div>\n//         <div>\n//           <label className=\"text-gray-700\">Memo</label>\n//           <Input.TextArea value={memo} onChange={(e) => setMemo(e.target.value)} />\n//         </div>\n\n//         <Button \n//           type=\"primary\"\n//           className=\"mt-6\"\n//           disabled={!date || !enteredAmount || !method || !account}\n//           onClick={handleSubmit}\n//         >\n//           Submit Payment\n//         </Button>\n//       </div>\n//     </Modal>\n//   );\n// };\n\n// export default RecordPaymentModal;\n\n// import { useState, useEffect } from 'react';\n// import { Modal, DatePicker, Input, Select, Button, message } from 'antd';\n// import { formatCurrency } from '../../Utility/formatters';\n\n// // Properly destructure all needed components from Select\n// const { Option, OptGroup } = Select;\n\n// const RecordPaymentModal = ({ invoiceId, amount, onClose, onSubmit }) => {\n//   console.log('RecordPaymentModal props:', { invoiceId, amount, onClose, onSubmit });\n//   const [date, setDate] = useState(null);  \n//   const [enteredAmount, setEnteredAmount] = useState('');\n//   const [method, setMethod] = useState('');\n//   const [account, setAccount] = useState('');\n//   const [memo, setMemo] = useState('');\n//   const [accounts, setAccounts] = useState([]);\n//   const [loading, setLoading] = useState(false);\n\n//   useEffect(() => {\n//     setEnteredAmount(amount.toString());\n//   }, [amount]);\n\n//   // Fetch accounts as before\n//   useEffect(() => {\n//     const fetchAccounts = async () => {\n//       try {\n//         const response = await fetch('http://localhost:8080/api/accounts');\n//         const data = await response.json();\n\n//         // Only asset accounts\n//         const assetAccounts = data.filter(acct => acct.type === 'assets');\n\n//         // Build parent-child map\n//         const accountMap = {};\n//         assetAccounts.forEach(acct => accountMap[acct.id] = { ...acct, children: [] });\n\n//         assetAccounts.forEach(acct => {\n//           if (acct.parentId && accountMap[acct.parentId]) {\n//             accountMap[acct.parentId].children.push(accountMap[acct.id]);\n//           }\n//         });\n\n//         // Top-level accounts\n//         const tree = assetAccounts.filter(acct => !acct.parentId || !accountMap[acct.parentId]);\n//         setAccounts(tree);\n//       } catch (err) {\n//         console.error('Failed to fetch accounts:', err);\n//       }\n//     };\n\n//     fetchAccounts();\n//   }, []);\n\n//   const handleSubmit = async () => {\n//     if (!date || !enteredAmount || !method || !account) return;\n\n//     setLoading(true);\n//     try {\n//       // Create payment data object\n//       const paymentData = {\n//         id: Date.now(), // Generate a unique ID\n//         invoiceId,\n//         date: date.format('YYYY-MM-DD'),\n//         amount: parseFloat(enteredAmount),\n//         paymentMethod: method,\n//         accountId: account,\n//         memo,\n//         status: 'completed',\n//         createdAt: new Date().toISOString()\n//       };\n\n//       // Save to localStorage (temporary solution)\n//       const existingPayments = JSON.parse(localStorage.getItem('payments') || '[]');\n//       const updatedPayments = [...existingPayments, paymentData];\n//       localStorage.setItem('payments', JSON.stringify(updatedPayments));\n\n//       // Also update the order status in localStorage\n//       const existingOrders = JSON.parse(localStorage.getItem('orders') || '[]');\n//       const orderIndex = existingOrders.findIndex(order => \n//         order.orderId === invoiceId || order.id === invoiceId\n//       );\n\n//       if (orderIndex !== -1) {\n//         existingOrders[orderIndex].paid = true;\n//         existingOrders[orderIndex].paymentDate = paymentData.date;\n//         localStorage.setItem('orders', JSON.stringify(existingOrders));\n//       }\n\n//       message.success('Payment recorded successfully!');\n\n//       // Call the onSubmit callback with the payment data\n//       onSubmit(date, parseFloat(enteredAmount), method, account, memo, paymentData);\n\n//       onClose();\n//     } catch (error) {\n//       console.error('Error recording payment:', error);\n//       message.error('Failed to record payment. Please try again.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <Modal\n//       title={`Record Payment for Invoice ${invoiceId}`}\n//       open={true}\n//       onCancel={onClose}\n//       footer={[\n//         <Button key=\"cancel\" onClick={onClose}>\n//           Close\n//         </Button>\n//       ]}\n//     >\n//       <div className=\"space-y-4\">\n//         <div>\n//           <label className=\"text-gray-700\">Date</label>\n//           <DatePicker \n//             className=\"w-full\"\n//             value={date}\n//             onChange={(val) => setDate(val)}\n//           />\n//         </div>\n//         <div>\n//           <label className=\"text-gray-700\">Amount</label>\n//           <Input\n//             value={enteredAmount} \n//             onChange={(e) => setEnteredAmount(e.target.value)}\n//             prefix={<span className=\"text-gray-500\">Rs</span>}\n//           />\n//           <div className=\"text-sm text-gray-500\">\n//             Invoice amount: {formatCurrency(amount)} <br />\n//             Remaining amount: {formatCurrency(amount - (parseFloat(enteredAmount) || 0))}\n//           </div>\n//         </div>\n\n//         <div>\n//           <label className=\"text-gray-700\">Payment Method</label>\n//           <Select value={method} onChange={setMethod} className=\"w-full\">\n//             <Option value=\"cash\">Cash</Option>\n//             <Option value=\"check\">Check</Option>\n//             <Option value=\"eft\">Bank/Electronic Funds</Option>\n//             <Option value=\"credit\">Credit Card</Option> \n//           </Select>\n//         </div>\n//         <div>\n//           <label className=\"text-gray-700\">Deposit Account</label>\n//           <Select\n//             value={account}\n//             onChange={setAccount}\n//             showSearch\n//             filterOption={(input, option) =>\n//               (option?.children ?? '').toLowerCase().includes(input.toLowerCase())\n//             }\n//             className=\"w-full\"\n//           >\n//             {accounts.map(parent =>\n//               parent.children.length > 0 ? (\n//                 <OptGroup key={parent.id} label={`${parent.code} - ${parent.name}`}>\n//                   {parent.children.map(child => (\n//                     <Option key={child.id} value={child.id}>\n//                       {child.code} - {child.name}\n//                     </Option>\n//                   ))}\n//                 </OptGroup>\n//               ) : (\n//                 <Option key={parent.id} value={parent.id}>\n//                   {parent.code} - {parent.name}\n//                 </Option>\n//               )\n//             )}\n//           </Select>\n//         </div>\n//         <div>\n//           <label className=\"text-gray-700\">Memo</label>\n//           <Input.TextArea value={memo} onChange={(e) => setMemo(e.target.value)} />\n//         </div>\n\n//         <Button \n//           type=\"primary\"\n//           className=\"mt-6\"\n//           disabled={!date || !enteredAmount || !method || !account}\n//           onClick={handleSubmit}\n//           loading={loading}\n//         >\n//           Submit Payment\n//         </Button>\n//       </div>\n//     </Modal>\n//   );\n// };\n\n// export default RecordPaymentModal;\n\n// import { useState, useEffect } from 'react';\n// import { Modal, DatePicker, Input, Select, Button, message } from 'antd';\n// import { formatCurrency } from '../../Utility/formatters';\n\n// // Properly destructure all needed components from Select\n// const { Option, OptGroup } = Select;\n\n// const RecordPaymentModal = ({ invoiceId, amount, onClose, onSubmit }) => {\n//   console.log('RecordPaymentModal props:', { invoiceId, amount, onClose, onSubmit });\n//   const [date, setDate] = useState(null);  \n//   const [enteredAmount, setEnteredAmount] = useState('');\n//   const [method, setMethod] = useState('');\n//   const [account, setAccount] = useState('');\n//   const [memo, setMemo] = useState('');\n//   const [accounts, setAccounts] = useState([]);\n//   const [loading, setLoading] = useState(false);\n//   const [showConfirmation, setShowConfirmation] = useState(false);\n\n//   useEffect(() => {\n//     setEnteredAmount(amount.toString());\n//   }, [amount]);\n\n//   // Fetch accounts as before\n//   useEffect(() => {\n//     const fetchAccounts = async () => {\n//       try {\n//         const response = await fetch('http://localhost:8080/api/accounts');\n//         const data = await response.json();\n\n//         // Only asset accounts\n//         const assetAccounts = data.filter(acct => acct.type === 'assets');\n\n//         // Build parent-child map\n//         const accountMap = {};\n//         assetAccounts.forEach(acct => accountMap[acct.id] = { ...acct, children: [] });\n\n//         assetAccounts.forEach(acct => {\n//           if (acct.parentId && accountMap[acct.parentId]) {\n//             accountMap[acct.parentId].children.push(accountMap[acct.id]);\n//           }\n//         });\n\n//         // Top-level accounts\n//         const tree = assetAccounts.filter(acct => !acct.parentId || !accountMap[acct.parentId]);\n//         setAccounts(tree);\n//       } catch (err) {\n//         console.error('Failed to fetch accounts:', err);\n//       }\n//     };\n\n//     fetchAccounts();\n//   }, []);\n\n//   const handleSubmit = async () => {\n//     if (!date || !enteredAmount || !method || !account) return;\n\n//     // Show confirmation modal instead of directly submitting\n//     setShowConfirmation(true);\n//   };\n\n//   const confirmPayment = async () => {\n//     setLoading(true);\n//     setShowConfirmation(false);\n\n//     try {\n//       // Create payment data object\n//       const paymentData = {\n//         id: Date.now(), // Generate a unique ID\n//         invoiceId,\n//         date: date.format('YYYY-MM-DD'),\n//         amount: parseFloat(enteredAmount),\n//         paymentMethod: method,\n//         accountId: account,\n//         memo,\n//         status: 'completed',\n//         createdAt: new Date().toISOString()\n//       };\n\n//       // Save to localStorage (temporary solution)\n//       const existingPayments = JSON.parse(localStorage.getItem('payments') || '[]');\n//       const updatedPayments = [...existingPayments, paymentData];\n//       localStorage.setItem('payments', JSON.stringify(updatedPayments));\n\n//       // Also update the order status in localStorage\n//       const existingOrders = JSON.parse(localStorage.getItem('orders') || '[]');\n//       const orderIndex = existingOrders.findIndex(order => \n//         order.orderId === invoiceId || order.id === invoiceId\n//       );\n\n//       if (orderIndex !== -1) {\n//         existingOrders[orderIndex].paid = true;\n//         existingOrders[orderIndex].paymentDate = paymentData.date;\n//         localStorage.setItem('orders', JSON.stringify(existingOrders));\n//       }\n\n//       message.success('Payment recorded successfully!');\n\n//       // Call the onSubmit callback with the payment data\n//       onSubmit(date, parseFloat(enteredAmount), method, account, memo, paymentData);\n\n//       onClose();\n//     } catch (error) {\n//       console.error('Error recording payment:', error);\n//       message.error('Failed to record payment. Please try again.');\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const cancelPayment = () => {\n//     setShowConfirmation(false);\n//   };\n\n//   return (\n//     <>\n//       <Modal\n//         title={`Record Payment for Invoice ${invoiceId}`}\n//         open={true}\n//         onCancel={onClose}\n//         footer={[\n//           <Button key=\"cancel\" onClick={onClose}>\n//             Close\n//           </Button>\n//         ]}\n//       >\n//         <div className=\"space-y-4\">\n//           <div>\n//             <label className=\"text-gray-700\">Date</label>\n//             <DatePicker \n//               className=\"w-full\"\n//               value={date}\n//               onChange={(val) => setDate(val)}\n//             />\n//           </div>\n//           <div>\n//             <label className=\"text-gray-700\">Amount</label>\n//             <Input\n//               value={enteredAmount} \n//               onChange={(e) => setEnteredAmount(e.target.value)}\n//               prefix={<span className=\"text-gray-500\">Rs</span>}\n//             />\n//             <div className=\"text-sm text-gray-500\">\n//               Invoice amount: {formatCurrency(amount)} <br />\n//               Remaining amount: {formatCurrency(amount - (parseFloat(enteredAmount) || 0))}\n//             </div>\n//           </div>\n\n//           <div>\n//             <label className=\"text-gray-700\">Payment Method</label>\n//             <Select value={method} onChange={setMethod} className=\"w-full\">\n//               <Option value=\"cash\">Cash</Option>\n//               <Option value=\"check\">Check</Option>\n//               <Option value=\"eft\">Bank/Electronic Funds</Option>\n//               <Option value=\"credit\">Credit Card</Option> \n//             </Select>\n//           </div>\n//           <div>\n//             <label className=\"text-gray-700\">Deposit Account</label>\n//             <Select\n//               value={account}\n//               onChange={setAccount}\n//               showSearch\n//               filterOption={(input, option) =>\n//                 (option?.children ?? '').toLowerCase().includes(input.toLowerCase())\n//               }\n//               className=\"w-full\"\n//             >\n//               {accounts.map(parent =>\n//                 parent.children.length > 0 ? (\n//                   <OptGroup key={parent.id} label={`${parent.code} - ${parent.name}`}>\n//                     {parent.children.map(child => (\n//                       <Option key={child.id} value={child.id}>\n//                         {child.code} - {child.name}\n//                       </Option>\n//                     ))}\n//                   </OptGroup>\n//                 ) : (\n//                   <Option key={parent.id} value={parent.id}>\n//                     {parent.code} - {parent.name}\n//                   </Option>\n//                 )\n//               )}\n//             </Select>\n//           </div>\n//           <div>\n//             <label className=\"text-gray-700\">Memo</label>\n//             <Input.TextArea value={memo} onChange={(e) => setMemo(e.target.value)} />\n//           </div>\n\n//           <Button \n//             type=\"primary\"\n//             className=\"mt-6\"\n//             disabled={!date || !enteredAmount || !method || !account}\n//             onClick={handleSubmit}\n//             loading={loading}\n//           >\n//             Submit Payment\n//           </Button>\n//         </div>\n//       </Modal>\n\n//       {/* Confirmation Modal */}\n//       <Modal\n//         title=\"Confirm Payment\"\n//         open={showConfirmation}\n//         onOk={confirmPayment}\n//         onCancel={cancelPayment}\n//         okText=\"Confirm\"\n//         cancelText=\"Cancel\"\n//       >\n//         <div className=\"space-y-4\">\n//           <p>Are you sure you want to record this payment?</p>\n//           <div className=\"bg-gray-50 p-3 rounded\">\n//             <p><strong>Invoice:</strong> #{invoiceId}</p>\n//             <p><strong>Amount:</strong> {formatCurrency(parseFloat(enteredAmount))}</p>\n//             <p><strong>Method:</strong> {method}</p>\n//             <p><strong>Date:</strong> {date ? date.format('YYYY-MM-DD') : 'N/A'}</p>\n//           </div>\n//           <p className=\"text-sm text-gray-500\">This action cannot be undone.</p>\n//         </div>\n//       </Modal>\n//     </>\n//   );\n// };\n\n// export default RecordPaymentModal;\n\nimport { useState, useEffect } from 'react';\nimport { Modal, DatePicker, Input, Select, Button, message } from 'antd';\nimport { formatCurrency } from '../../AccountsReceivableUtils/formatters';\n\n// Properly destructure all needed components from Select\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  Option,\n  OptGroup\n} = Select;\nconst RecordPaymentModal = ({\n  invoiceId,\n  amount,\n  onClose,\n  onSubmit\n}) => {\n  _s();\n  console.log('RecordPaymentModal props:', {\n    invoiceId,\n    amount,\n    onClose,\n    onSubmit\n  });\n  const [date, setDate] = useState(null);\n  const [enteredAmount, setEnteredAmount] = useState('');\n  const [method, setMethod] = useState('');\n  const [account, setAccount] = useState('');\n  const [memo, setMemo] = useState('');\n  const [accounts, setAccounts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [showConfirmation, setShowConfirmation] = useState(false);\n  useEffect(() => {\n    setEnteredAmount(amount.toString());\n  }, [amount]);\n\n  // Fetch accounts as before\n  useEffect(() => {\n    const fetchAccounts = async () => {\n      try {\n        const response = await fetch('http://localhost:8080/api/accounts');\n        const data = await response.json();\n\n        // Only asset accounts\n        const assetAccounts = data.filter(acct => acct.type === 'assets');\n\n        // Build parent-child map\n        const accountMap = {};\n        assetAccounts.forEach(acct => accountMap[acct.id] = {\n          ...acct,\n          children: []\n        });\n        assetAccounts.forEach(acct => {\n          if (acct.parentId && accountMap[acct.parentId]) {\n            accountMap[acct.parentId].children.push(accountMap[acct.id]);\n          }\n        });\n\n        // Top-level accounts\n        const tree = assetAccounts.filter(acct => !acct.parentId || !accountMap[acct.parentId]);\n        setAccounts(tree);\n      } catch (err) {\n        console.error('Failed to fetch accounts:', err);\n      }\n    };\n    fetchAccounts();\n  }, []);\n  const handleSubmit = async () => {\n    if (!date || !enteredAmount || !method || !account) return;\n\n    // Show confirmation modal instead of directly submitting\n    setShowConfirmation(true);\n  };\n  const confirmPayment = async () => {\n    setLoading(true);\n    setShowConfirmation(false);\n    try {\n      const paymentAmount = parseFloat(enteredAmount);\n      const isFullPayment = paymentAmount >= amount;\n\n      // Create payment data object\n      const paymentData = {\n        id: Date.now(),\n        // Generate a unique ID\n        invoiceId,\n        date: date.format('YYYY-MM-DD'),\n        amount: paymentAmount,\n        paymentMethod: method,\n        accountId: account,\n        memo,\n        status: isFullPayment ? 'completed' : 'partial',\n        createdAt: new Date().toISOString()\n      };\n\n      // Save to localStorage (temporary solution)\n      const existingPayments = JSON.parse(localStorage.getItem('payments') || '[]');\n      const updatedPayments = [...existingPayments, paymentData];\n      localStorage.setItem('payments', JSON.stringify(updatedPayments));\n\n      // Also update the order status in localStorage\n      const existingOrders = JSON.parse(localStorage.getItem('orders') || '[]');\n      const orderIndex = existingOrders.findIndex(order => order.orderId === invoiceId || order.id === invoiceId);\n      if (orderIndex !== -1) {\n        const updatedOrder = {\n          ...existingOrders[orderIndex]\n        };\n\n        // Update payment status based on amount paid\n        if (isFullPayment) {\n          updatedOrder.paid = true;\n          updatedOrder.paymentStatus = 'paid';\n        } else {\n          updatedOrder.paid = false;\n          updatedOrder.paymentStatus = 'partial';\n          // Calculate remaining amount\n          updatedOrder.remainingAmount = (updatedOrder.total || updatedOrder.amount) - paymentAmount;\n        }\n        updatedOrder.paymentDate = paymentData.date;\n        updatedOrder.lastPaymentAmount = paymentAmount;\n        existingOrders[orderIndex] = updatedOrder;\n        localStorage.setItem('orders', JSON.stringify(existingOrders));\n      }\n      message.success(isFullPayment ? 'Payment completed successfully!' : 'Partial payment recorded successfully!');\n\n      // Call the onSubmit callback with the payment data and full payment status\n      onSubmit(date, paymentAmount, method, account, memo, paymentData, isFullPayment);\n      onClose();\n    } catch (error) {\n      console.error('Error recording payment:', error);\n      message.error('Failed to record payment. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const cancelPayment = () => {\n    setShowConfirmation(false);\n  };\n\n  // Calculate if this is a full payment\n  const isFullPayment = parseFloat(enteredAmount) >= amount;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      title: `Record Payment for Invoice ${invoiceId}`,\n      open: true,\n      onCancel: onClose,\n      footer: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: onClose,\n        children: \"Close\"\n      }, \"cancel\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 722,\n        columnNumber: 11\n      }, this)],\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-gray-700\",\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n            className: \"w-full\",\n            value: date,\n            onChange: val => setDate(val)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-gray-700\",\n            children: \"Amount\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: enteredAmount,\n            onChange: e => setEnteredAmount(e.target.value),\n            prefix: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-500\",\n              children: \"Rs\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 738,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-500\",\n            children: [\"Invoice amount: \", formatCurrency(amount), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 56\n            }, this), \"Remaining amount: \", formatCurrency(amount - (parseFloat(enteredAmount) || 0)), isFullPayment && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-green-600 font-semibold mt-1\",\n              children: \"This payment will complete the invoice.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 747,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 743,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-gray-700\",\n            children: \"Payment Method\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            value: method,\n            onChange: setMethod,\n            className: \"w-full\",\n            children: [/*#__PURE__*/_jsxDEV(Option, {\n              value: \"cash\",\n              children: \"Cash\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 757,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"check\",\n              children: \"Check\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"eft\",\n              children: \"Bank/Electronic Funds\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 759,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Option, {\n              value: \"credit\",\n              children: \"Credit Card\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 760,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-gray-700\",\n            children: \"Deposit Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 764,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Select, {\n            value: account,\n            onChange: setAccount,\n            showSearch: true,\n            filterOption: (input, option) => {\n              var _option$children;\n              return ((_option$children = option === null || option === void 0 ? void 0 : option.children) !== null && _option$children !== void 0 ? _option$children : '').toLowerCase().includes(input.toLowerCase());\n            },\n            className: \"w-full\",\n            children: accounts.map(parent => parent.children.length > 0 ? /*#__PURE__*/_jsxDEV(OptGroup, {\n              label: `${parent.code} - ${parent.name}`,\n              children: parent.children.map(child => /*#__PURE__*/_jsxDEV(Option, {\n                value: child.id,\n                children: [child.code, \" - \", child.name]\n              }, child.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 778,\n                columnNumber: 23\n              }, this))\n            }, parent.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 776,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(Option, {\n              value: parent.id,\n              children: [parent.code, \" - \", parent.name]\n            }, parent.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 784,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 765,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"text-gray-700\",\n            children: \"Memo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 792,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input.TextArea, {\n            value: memo,\n            onChange: e => setMemo(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 793,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          className: \"mt-6\",\n          disabled: !date || !enteredAmount || !method || !account,\n          onClick: handleSubmit,\n          loading: loading,\n          children: isFullPayment ? 'Complete Payment' : 'Record Payment'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 796,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 717,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: isFullPayment ? \"Complete Payment\" : \"Record Payment\",\n      open: showConfirmation,\n      onOk: confirmPayment,\n      onCancel: cancelPayment,\n      okText: isFullPayment ? \"Complete Payment\" : \"Record Payment\",\n      cancelText: \"Cancel\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Are you sure you want to \", isFullPayment ? 'complete' : 'record', \" this payment?\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 818,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Invoice:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 820,\n              columnNumber: 16\n            }, this), \" #\", invoiceId]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 820,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Amount:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 821,\n              columnNumber: 16\n            }, this), \" \", formatCurrency(parseFloat(enteredAmount))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 821,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Method:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 822,\n              columnNumber: 16\n            }, this), \" \", method]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 822,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 823,\n              columnNumber: 16\n            }, this), \" \", date ? date.format('YYYY-MM-DD') : 'N/A']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 823,\n            columnNumber: 13\n          }, this), isFullPayment && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-600 font-semibold\",\n            children: \"This payment will mark the invoice as fully paid.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 825,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 819,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: \"This action cannot be undone.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 830,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 817,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 809,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(RecordPaymentModal, \"eCGo7Xm7uRMsPQUjLYocvkjl0jE=\");\n_c = RecordPaymentModal;\nexport default RecordPaymentModal;\nvar _c;\n$RefreshReg$(_c, \"RecordPaymentModal\");","map":{"version":3,"names":["useState","useEffect","Modal","DatePicker","Input","Select","Button","message","formatCurrency","jsxDEV","_jsxDEV","Fragment","_Fragment","Option","OptGroup","RecordPaymentModal","invoiceId","amount","onClose","onSubmit","_s","console","log","date","setDate","enteredAmount","setEnteredAmount","method","setMethod","account","setAccount","memo","setMemo","accounts","setAccounts","loading","setLoading","showConfirmation","setShowConfirmation","toString","fetchAccounts","response","fetch","data","json","assetAccounts","filter","acct","type","accountMap","forEach","id","children","parentId","push","tree","err","error","handleSubmit","confirmPayment","paymentAmount","parseFloat","isFullPayment","paymentData","Date","now","format","paymentMethod","accountId","status","createdAt","toISOString","existingPayments","JSON","parse","localStorage","getItem","updatedPayments","setItem","stringify","existingOrders","orderIndex","findIndex","order","orderId","updatedOrder","paid","paymentStatus","remainingAmount","total","paymentDate","lastPaymentAmount","success","cancelPayment","title","open","onCancel","footer","onClick","fileName","_jsxFileName","lineNumber","columnNumber","className","value","onChange","val","e","target","prefix","showSearch","filterOption","input","option","_option$children","toLowerCase","includes","map","parent","length","label","code","name","child","TextArea","disabled","onOk","okText","cancelText","_c","$RefreshReg$"],"sources":["C:/Users/Logic-Unit/my-account/src/components/AccountsReceivable/RecordPaymentModal.jsx"],"sourcesContent":["// import { useState, useEffect } from 'react';\r\n// import { Modal, DatePicker, Input, Select, Button, Spin } from 'antd';\r\n// import { formatCurrency } from '../../Utility/formatters';\r\n\r\n// // Properly destructure all needed components from Select\r\n// const { Option, OptGroup } = Select;\r\n\r\n// const RecordPaymentModal = ({ invoiceId, amount, onClose, onSubmit }) => {\r\n//    console.log('RecordPaymentModal props:', { invoiceId, amount, onClose, onSubmit });\r\n//   const [date, setDate] = useState(null);  \r\n//   const [enteredAmount, setEnteredAmount] = useState('');\r\n//   const [method, setMethod] = useState('');\r\n//   const [account, setAccount] = useState('');\r\n//   const [memo, setMemo] = useState('');\r\n//   const [accounts, setAccounts] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   useEffect(()=>{\r\n//    setEnteredAmount(amount.toString());\r\n//   },[amount])\r\n//   // Use the amount prop directly instead of fetching from API\r\n//   useEffect(() => {\r\n//     if (amount) {\r\n//       setEnteredAmount(amount.toString());\r\n//     }\r\n//   }, [amount]);\r\n\r\n//   // Fetch accounts as before\r\n//   useEffect(() => {\r\n//     const fetchAccounts = async () => {\r\n//       try {\r\n//         const response = await fetch('http://localhost:8080/api/accounts');\r\n//         const data = await response.json();\r\n\r\n//         // Only asset accounts\r\n//         const assetAccounts = data.filter(acct => acct.type === 'assets');\r\n\r\n//         // Build parent-child map\r\n//         const accountMap = {};\r\n//         assetAccounts.forEach(acct => accountMap[acct.id] = { ...acct, children: [] });\r\n\r\n//         assetAccounts.forEach(acct => {\r\n//           if (acct.parentId && accountMap[acct.parentId]) {\r\n//             accountMap[acct.parentId].children.push(accountMap[acct.id]);\r\n//           }\r\n//         });\r\n\r\n//         // Top-level accounts\r\n//         const tree = assetAccounts.filter(acct => !acct.parentId || !accountMap[acct.parentId]);\r\n//         setAccounts(tree);\r\n//       } catch (err) {\r\n//         console.error('Failed to fetch accounts:', err);\r\n//       }\r\n//     };\r\n\r\n//     fetchAccounts();\r\n//   }, []);\r\n\r\n//   const handleSubmit = () => {\r\n//     if (!date || !enteredAmount || !method || !account) return;\r\n//     onSubmit(date, parseFloat(enteredAmount), method, account, memo);\r\n//     onClose();\r\n//   };\r\n\r\n//   return (\r\n//     <Modal\r\n//       title={`Record Payment for Invoice ${invoiceId}`}\r\n//       open={true}\r\n//       onCancel={onClose}\r\n//       footer={[\r\n//         <Button key=\"cancel\" onClick={onClose}>\r\n//           Close\r\n//         </Button>\r\n//       ]}\r\n//     >\r\n//       <div className=\"space-y-4\">\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Date</label>\r\n//           <DatePicker \r\n//             className=\"w-full\"\r\n//             value={date}\r\n//             onChange={(val) => setDate(val)}\r\n//           />\r\n//         </div>\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Amount</label>\r\n//           <Input\r\n//             value={enteredAmount} \r\n//             onChange={(e) => setEnteredAmount(e.target.value)}\r\n//             prefix={<span className=\"text-gray-500\">Rs</span>}\r\n//           />\r\n//           <div className=\"text-sm text-gray-500\">\r\n          \r\n//             Remaining amount: {formatCurrency(amount - (parseFloat(enteredAmount) || 0))}\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Payment Method</label>\r\n//           <Select value={method} onChange={setMethod} className=\"w-full\">\r\n//             <Option value=\"cash\">Cash</Option>\r\n//             <Option value=\"check\">Check</Option>\r\n//             <Option value=\"eft\">Bank/Electronic Funds</Option>\r\n//             <Option value=\"credit\">Credit Card</Option> \r\n//           </Select>\r\n//         </div>\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Deposit Account</label>\r\n//           <Select\r\n//             value={account}\r\n//             onChange={setAccount}\r\n//             showSearch\r\n//             filterOption={(input, option) =>\r\n//               (option?.children ?? '').toLowerCase().includes(input.toLowerCase())\r\n//             }\r\n//             className=\"w-full\"\r\n//           >\r\n//             {accounts.map(parent =>\r\n//               parent.children.length > 0 ? (\r\n//                 <OptGroup key={parent.id} label={`${parent.code} - ${parent.name}`}>\r\n//                   {parent.children.map(child => (\r\n//                     <Option key={child.id} value={child.id}>\r\n//                       {child.code} - {child.name}\r\n//                     </Option>\r\n//                   ))}\r\n//                 </OptGroup>\r\n//               ) : (\r\n//                 <Option key={parent.id} value={parent.id}>\r\n//                   {parent.code} - {parent.name}\r\n//                 </Option>\r\n//               )\r\n//             )}\r\n//           </Select>\r\n//         </div>\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Memo</label>\r\n//           <Input.TextArea value={memo} onChange={(e) => setMemo(e.target.value)} />\r\n//         </div>\r\n        \r\n//         <Button \r\n//           type=\"primary\"\r\n//           className=\"mt-6\"\r\n//           disabled={!date || !enteredAmount || !method || !account}\r\n//           onClick={handleSubmit}\r\n//         >\r\n//           Submit Payment\r\n//         </Button>\r\n//       </div>\r\n//     </Modal>\r\n//   );\r\n// };\r\n\r\n// export default RecordPaymentModal;\r\n\r\n\r\n// import { useState, useEffect } from 'react';\r\n// import { Modal, DatePicker, Input, Select, Button, message } from 'antd';\r\n// import { formatCurrency } from '../../Utility/formatters';\r\n\r\n// // Properly destructure all needed components from Select\r\n// const { Option, OptGroup } = Select;\r\n\r\n// const RecordPaymentModal = ({ invoiceId, amount, onClose, onSubmit }) => {\r\n//   console.log('RecordPaymentModal props:', { invoiceId, amount, onClose, onSubmit });\r\n//   const [date, setDate] = useState(null);  \r\n//   const [enteredAmount, setEnteredAmount] = useState('');\r\n//   const [method, setMethod] = useState('');\r\n//   const [account, setAccount] = useState('');\r\n//   const [memo, setMemo] = useState('');\r\n//   const [accounts, setAccounts] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   useEffect(() => {\r\n//     setEnteredAmount(amount.toString());\r\n//   }, [amount]);\r\n\r\n//   // Fetch accounts as before\r\n//   useEffect(() => {\r\n//     const fetchAccounts = async () => {\r\n//       try {\r\n//         const response = await fetch('http://localhost:8080/api/accounts');\r\n//         const data = await response.json();\r\n\r\n//         // Only asset accounts\r\n//         const assetAccounts = data.filter(acct => acct.type === 'assets');\r\n\r\n//         // Build parent-child map\r\n//         const accountMap = {};\r\n//         assetAccounts.forEach(acct => accountMap[acct.id] = { ...acct, children: [] });\r\n\r\n//         assetAccounts.forEach(acct => {\r\n//           if (acct.parentId && accountMap[acct.parentId]) {\r\n//             accountMap[acct.parentId].children.push(accountMap[acct.id]);\r\n//           }\r\n//         });\r\n\r\n//         // Top-level accounts\r\n//         const tree = assetAccounts.filter(acct => !acct.parentId || !accountMap[acct.parentId]);\r\n//         setAccounts(tree);\r\n//       } catch (err) {\r\n//         console.error('Failed to fetch accounts:', err);\r\n//       }\r\n//     };\r\n\r\n//     fetchAccounts();\r\n//   }, []);\r\n\r\n//   const handleSubmit = async () => {\r\n//     if (!date || !enteredAmount || !method || !account) return;\r\n    \r\n//     setLoading(true);\r\n//     try {\r\n//       // Create payment data object\r\n//       const paymentData = {\r\n//         id: Date.now(), // Generate a unique ID\r\n//         invoiceId,\r\n//         date: date.format('YYYY-MM-DD'),\r\n//         amount: parseFloat(enteredAmount),\r\n//         paymentMethod: method,\r\n//         accountId: account,\r\n//         memo,\r\n//         status: 'completed',\r\n//         createdAt: new Date().toISOString()\r\n//       };\r\n\r\n//       // Save to localStorage (temporary solution)\r\n//       const existingPayments = JSON.parse(localStorage.getItem('payments') || '[]');\r\n//       const updatedPayments = [...existingPayments, paymentData];\r\n//       localStorage.setItem('payments', JSON.stringify(updatedPayments));\r\n\r\n//       // Also update the order status in localStorage\r\n//       const existingOrders = JSON.parse(localStorage.getItem('orders') || '[]');\r\n//       const orderIndex = existingOrders.findIndex(order => \r\n//         order.orderId === invoiceId || order.id === invoiceId\r\n//       );\r\n      \r\n//       if (orderIndex !== -1) {\r\n//         existingOrders[orderIndex].paid = true;\r\n//         existingOrders[orderIndex].paymentDate = paymentData.date;\r\n//         localStorage.setItem('orders', JSON.stringify(existingOrders));\r\n//       }\r\n\r\n//       message.success('Payment recorded successfully!');\r\n      \r\n//       // Call the onSubmit callback with the payment data\r\n//       onSubmit(date, parseFloat(enteredAmount), method, account, memo, paymentData);\r\n      \r\n//       onClose();\r\n//     } catch (error) {\r\n//       console.error('Error recording payment:', error);\r\n//       message.error('Failed to record payment. Please try again.');\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <Modal\r\n//       title={`Record Payment for Invoice ${invoiceId}`}\r\n//       open={true}\r\n//       onCancel={onClose}\r\n//       footer={[\r\n//         <Button key=\"cancel\" onClick={onClose}>\r\n//           Close\r\n//         </Button>\r\n//       ]}\r\n//     >\r\n//       <div className=\"space-y-4\">\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Date</label>\r\n//           <DatePicker \r\n//             className=\"w-full\"\r\n//             value={date}\r\n//             onChange={(val) => setDate(val)}\r\n//           />\r\n//         </div>\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Amount</label>\r\n//           <Input\r\n//             value={enteredAmount} \r\n//             onChange={(e) => setEnteredAmount(e.target.value)}\r\n//             prefix={<span className=\"text-gray-500\">Rs</span>}\r\n//           />\r\n//           <div className=\"text-sm text-gray-500\">\r\n//             Invoice amount: {formatCurrency(amount)} <br />\r\n//             Remaining amount: {formatCurrency(amount - (parseFloat(enteredAmount) || 0))}\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Payment Method</label>\r\n//           <Select value={method} onChange={setMethod} className=\"w-full\">\r\n//             <Option value=\"cash\">Cash</Option>\r\n//             <Option value=\"check\">Check</Option>\r\n//             <Option value=\"eft\">Bank/Electronic Funds</Option>\r\n//             <Option value=\"credit\">Credit Card</Option> \r\n//           </Select>\r\n//         </div>\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Deposit Account</label>\r\n//           <Select\r\n//             value={account}\r\n//             onChange={setAccount}\r\n//             showSearch\r\n//             filterOption={(input, option) =>\r\n//               (option?.children ?? '').toLowerCase().includes(input.toLowerCase())\r\n//             }\r\n//             className=\"w-full\"\r\n//           >\r\n//             {accounts.map(parent =>\r\n//               parent.children.length > 0 ? (\r\n//                 <OptGroup key={parent.id} label={`${parent.code} - ${parent.name}`}>\r\n//                   {parent.children.map(child => (\r\n//                     <Option key={child.id} value={child.id}>\r\n//                       {child.code} - {child.name}\r\n//                     </Option>\r\n//                   ))}\r\n//                 </OptGroup>\r\n//               ) : (\r\n//                 <Option key={parent.id} value={parent.id}>\r\n//                   {parent.code} - {parent.name}\r\n//                 </Option>\r\n//               )\r\n//             )}\r\n//           </Select>\r\n//         </div>\r\n//         <div>\r\n//           <label className=\"text-gray-700\">Memo</label>\r\n//           <Input.TextArea value={memo} onChange={(e) => setMemo(e.target.value)} />\r\n//         </div>\r\n        \r\n//         <Button \r\n//           type=\"primary\"\r\n//           className=\"mt-6\"\r\n//           disabled={!date || !enteredAmount || !method || !account}\r\n//           onClick={handleSubmit}\r\n//           loading={loading}\r\n//         >\r\n//           Submit Payment\r\n//         </Button>\r\n//       </div>\r\n//     </Modal>\r\n//   );\r\n// };\r\n\r\n// export default RecordPaymentModal;\r\n\r\n\r\n\r\n\r\n\r\n// import { useState, useEffect } from 'react';\r\n// import { Modal, DatePicker, Input, Select, Button, message } from 'antd';\r\n// import { formatCurrency } from '../../Utility/formatters';\r\n\r\n// // Properly destructure all needed components from Select\r\n// const { Option, OptGroup } = Select;\r\n\r\n// const RecordPaymentModal = ({ invoiceId, amount, onClose, onSubmit }) => {\r\n//   console.log('RecordPaymentModal props:', { invoiceId, amount, onClose, onSubmit });\r\n//   const [date, setDate] = useState(null);  \r\n//   const [enteredAmount, setEnteredAmount] = useState('');\r\n//   const [method, setMethod] = useState('');\r\n//   const [account, setAccount] = useState('');\r\n//   const [memo, setMemo] = useState('');\r\n//   const [accounts, setAccounts] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n//   useEffect(() => {\r\n//     setEnteredAmount(amount.toString());\r\n//   }, [amount]);\r\n\r\n//   // Fetch accounts as before\r\n//   useEffect(() => {\r\n//     const fetchAccounts = async () => {\r\n//       try {\r\n//         const response = await fetch('http://localhost:8080/api/accounts');\r\n//         const data = await response.json();\r\n\r\n//         // Only asset accounts\r\n//         const assetAccounts = data.filter(acct => acct.type === 'assets');\r\n\r\n//         // Build parent-child map\r\n//         const accountMap = {};\r\n//         assetAccounts.forEach(acct => accountMap[acct.id] = { ...acct, children: [] });\r\n\r\n//         assetAccounts.forEach(acct => {\r\n//           if (acct.parentId && accountMap[acct.parentId]) {\r\n//             accountMap[acct.parentId].children.push(accountMap[acct.id]);\r\n//           }\r\n//         });\r\n\r\n//         // Top-level accounts\r\n//         const tree = assetAccounts.filter(acct => !acct.parentId || !accountMap[acct.parentId]);\r\n//         setAccounts(tree);\r\n//       } catch (err) {\r\n//         console.error('Failed to fetch accounts:', err);\r\n//       }\r\n//     };\r\n\r\n//     fetchAccounts();\r\n//   }, []);\r\n\r\n//   const handleSubmit = async () => {\r\n//     if (!date || !enteredAmount || !method || !account) return;\r\n    \r\n//     // Show confirmation modal instead of directly submitting\r\n//     setShowConfirmation(true);\r\n//   };\r\n\r\n//   const confirmPayment = async () => {\r\n//     setLoading(true);\r\n//     setShowConfirmation(false);\r\n    \r\n//     try {\r\n//       // Create payment data object\r\n//       const paymentData = {\r\n//         id: Date.now(), // Generate a unique ID\r\n//         invoiceId,\r\n//         date: date.format('YYYY-MM-DD'),\r\n//         amount: parseFloat(enteredAmount),\r\n//         paymentMethod: method,\r\n//         accountId: account,\r\n//         memo,\r\n//         status: 'completed',\r\n//         createdAt: new Date().toISOString()\r\n//       };\r\n\r\n//       // Save to localStorage (temporary solution)\r\n//       const existingPayments = JSON.parse(localStorage.getItem('payments') || '[]');\r\n//       const updatedPayments = [...existingPayments, paymentData];\r\n//       localStorage.setItem('payments', JSON.stringify(updatedPayments));\r\n\r\n//       // Also update the order status in localStorage\r\n//       const existingOrders = JSON.parse(localStorage.getItem('orders') || '[]');\r\n//       const orderIndex = existingOrders.findIndex(order => \r\n//         order.orderId === invoiceId || order.id === invoiceId\r\n//       );\r\n      \r\n//       if (orderIndex !== -1) {\r\n//         existingOrders[orderIndex].paid = true;\r\n//         existingOrders[orderIndex].paymentDate = paymentData.date;\r\n//         localStorage.setItem('orders', JSON.stringify(existingOrders));\r\n//       }\r\n\r\n//       message.success('Payment recorded successfully!');\r\n      \r\n//       // Call the onSubmit callback with the payment data\r\n//       onSubmit(date, parseFloat(enteredAmount), method, account, memo, paymentData);\r\n      \r\n//       onClose();\r\n//     } catch (error) {\r\n//       console.error('Error recording payment:', error);\r\n//       message.error('Failed to record payment. Please try again.');\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const cancelPayment = () => {\r\n//     setShowConfirmation(false);\r\n//   };\r\n\r\n//   return (\r\n//     <>\r\n//       <Modal\r\n//         title={`Record Payment for Invoice ${invoiceId}`}\r\n//         open={true}\r\n//         onCancel={onClose}\r\n//         footer={[\r\n//           <Button key=\"cancel\" onClick={onClose}>\r\n//             Close\r\n//           </Button>\r\n//         ]}\r\n//       >\r\n//         <div className=\"space-y-4\">\r\n//           <div>\r\n//             <label className=\"text-gray-700\">Date</label>\r\n//             <DatePicker \r\n//               className=\"w-full\"\r\n//               value={date}\r\n//               onChange={(val) => setDate(val)}\r\n//             />\r\n//           </div>\r\n//           <div>\r\n//             <label className=\"text-gray-700\">Amount</label>\r\n//             <Input\r\n//               value={enteredAmount} \r\n//               onChange={(e) => setEnteredAmount(e.target.value)}\r\n//               prefix={<span className=\"text-gray-500\">Rs</span>}\r\n//             />\r\n//             <div className=\"text-sm text-gray-500\">\r\n//               Invoice amount: {formatCurrency(amount)} <br />\r\n//               Remaining amount: {formatCurrency(amount - (parseFloat(enteredAmount) || 0))}\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div>\r\n//             <label className=\"text-gray-700\">Payment Method</label>\r\n//             <Select value={method} onChange={setMethod} className=\"w-full\">\r\n//               <Option value=\"cash\">Cash</Option>\r\n//               <Option value=\"check\">Check</Option>\r\n//               <Option value=\"eft\">Bank/Electronic Funds</Option>\r\n//               <Option value=\"credit\">Credit Card</Option> \r\n//             </Select>\r\n//           </div>\r\n//           <div>\r\n//             <label className=\"text-gray-700\">Deposit Account</label>\r\n//             <Select\r\n//               value={account}\r\n//               onChange={setAccount}\r\n//               showSearch\r\n//               filterOption={(input, option) =>\r\n//                 (option?.children ?? '').toLowerCase().includes(input.toLowerCase())\r\n//               }\r\n//               className=\"w-full\"\r\n//             >\r\n//               {accounts.map(parent =>\r\n//                 parent.children.length > 0 ? (\r\n//                   <OptGroup key={parent.id} label={`${parent.code} - ${parent.name}`}>\r\n//                     {parent.children.map(child => (\r\n//                       <Option key={child.id} value={child.id}>\r\n//                         {child.code} - {child.name}\r\n//                       </Option>\r\n//                     ))}\r\n//                   </OptGroup>\r\n//                 ) : (\r\n//                   <Option key={parent.id} value={parent.id}>\r\n//                     {parent.code} - {parent.name}\r\n//                   </Option>\r\n//                 )\r\n//               )}\r\n//             </Select>\r\n//           </div>\r\n//           <div>\r\n//             <label className=\"text-gray-700\">Memo</label>\r\n//             <Input.TextArea value={memo} onChange={(e) => setMemo(e.target.value)} />\r\n//           </div>\r\n          \r\n//           <Button \r\n//             type=\"primary\"\r\n//             className=\"mt-6\"\r\n//             disabled={!date || !enteredAmount || !method || !account}\r\n//             onClick={handleSubmit}\r\n//             loading={loading}\r\n//           >\r\n//             Submit Payment\r\n//           </Button>\r\n//         </div>\r\n//       </Modal>\r\n\r\n//       {/* Confirmation Modal */}\r\n//       <Modal\r\n//         title=\"Confirm Payment\"\r\n//         open={showConfirmation}\r\n//         onOk={confirmPayment}\r\n//         onCancel={cancelPayment}\r\n//         okText=\"Confirm\"\r\n//         cancelText=\"Cancel\"\r\n//       >\r\n//         <div className=\"space-y-4\">\r\n//           <p>Are you sure you want to record this payment?</p>\r\n//           <div className=\"bg-gray-50 p-3 rounded\">\r\n//             <p><strong>Invoice:</strong> #{invoiceId}</p>\r\n//             <p><strong>Amount:</strong> {formatCurrency(parseFloat(enteredAmount))}</p>\r\n//             <p><strong>Method:</strong> {method}</p>\r\n//             <p><strong>Date:</strong> {date ? date.format('YYYY-MM-DD') : 'N/A'}</p>\r\n//           </div>\r\n//           <p className=\"text-sm text-gray-500\">This action cannot be undone.</p>\r\n//         </div>\r\n//       </Modal>\r\n//     </>\r\n//   );\r\n// };\r\n\r\n// export default RecordPaymentModal;\r\n\r\n\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Modal, DatePicker, Input, Select, Button, message } from 'antd';\r\nimport { formatCurrency } from '../../AccountsReceivableUtils/formatters';\r\n\r\n// Properly destructure all needed components from Select\r\nconst { Option, OptGroup } = Select;\r\n\r\nconst RecordPaymentModal = ({ invoiceId, amount, onClose, onSubmit }) => {\r\n  console.log('RecordPaymentModal props:', { invoiceId, amount, onClose, onSubmit });\r\n  const [date, setDate] = useState(null);  \r\n  const [enteredAmount, setEnteredAmount] = useState('');\r\n  const [method, setMethod] = useState('');\r\n  const [account, setAccount] = useState('');\r\n  const [memo, setMemo] = useState('');\r\n  const [accounts, setAccounts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [showConfirmation, setShowConfirmation] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setEnteredAmount(amount.toString());\r\n  }, [amount]);\r\n\r\n  // Fetch accounts as before\r\n  useEffect(() => {\r\n    const fetchAccounts = async () => {\r\n      try {\r\n        const response = await fetch('http://localhost:8080/api/accounts');\r\n        const data = await response.json();\r\n\r\n        // Only asset accounts\r\n        const assetAccounts = data.filter(acct => acct.type === 'assets');\r\n\r\n        // Build parent-child map\r\n        const accountMap = {};\r\n        assetAccounts.forEach(acct => accountMap[acct.id] = { ...acct, children: [] });\r\n\r\n        assetAccounts.forEach(acct => {\r\n          if (acct.parentId && accountMap[acct.parentId]) {\r\n            accountMap[acct.parentId].children.push(accountMap[acct.id]);\r\n          }\r\n        });\r\n\r\n        // Top-level accounts\r\n        const tree = assetAccounts.filter(acct => !acct.parentId || !accountMap[acct.parentId]);\r\n        setAccounts(tree);\r\n      } catch (err) {\r\n        console.error('Failed to fetch accounts:', err);\r\n      }\r\n    };\r\n\r\n    fetchAccounts();\r\n  }, []);\r\n\r\n  const handleSubmit = async () => {\r\n    if (!date || !enteredAmount || !method || !account) return;\r\n    \r\n    // Show confirmation modal instead of directly submitting\r\n    setShowConfirmation(true);\r\n  };\r\n\r\n  const confirmPayment = async () => {\r\n    setLoading(true);\r\n    setShowConfirmation(false);\r\n    \r\n    try {\r\n      const paymentAmount = parseFloat(enteredAmount);\r\n      const isFullPayment = paymentAmount >= amount;\r\n      \r\n      // Create payment data object\r\n      const paymentData = {\r\n        id: Date.now(), // Generate a unique ID\r\n        invoiceId,\r\n        date: date.format('YYYY-MM-DD'),\r\n        amount: paymentAmount,\r\n        paymentMethod: method,\r\n        accountId: account,\r\n        memo,\r\n        status: isFullPayment ? 'completed' : 'partial',\r\n        createdAt: new Date().toISOString()\r\n      };\r\n\r\n      // Save to localStorage (temporary solution)\r\n      const existingPayments = JSON.parse(localStorage.getItem('payments') || '[]');\r\n      const updatedPayments = [...existingPayments, paymentData];\r\n      localStorage.setItem('payments', JSON.stringify(updatedPayments));\r\n\r\n      // Also update the order status in localStorage\r\n      const existingOrders = JSON.parse(localStorage.getItem('orders') || '[]');\r\n      const orderIndex = existingOrders.findIndex(order => \r\n        order.orderId === invoiceId || order.id === invoiceId\r\n      );\r\n      \r\n      if (orderIndex !== -1) {\r\n        const updatedOrder = { ...existingOrders[orderIndex] };\r\n        \r\n        // Update payment status based on amount paid\r\n        if (isFullPayment) {\r\n          updatedOrder.paid = true;\r\n          updatedOrder.paymentStatus = 'paid';\r\n        } else {\r\n          updatedOrder.paid = false;\r\n          updatedOrder.paymentStatus = 'partial';\r\n          // Calculate remaining amount\r\n          updatedOrder.remainingAmount = (updatedOrder.total || updatedOrder.amount) - paymentAmount;\r\n        }\r\n        \r\n        updatedOrder.paymentDate = paymentData.date;\r\n        updatedOrder.lastPaymentAmount = paymentAmount;\r\n        \r\n        existingOrders[orderIndex] = updatedOrder;\r\n        localStorage.setItem('orders', JSON.stringify(existingOrders));\r\n      }\r\n\r\n      message.success(isFullPayment ? 'Payment completed successfully!' : 'Partial payment recorded successfully!');\r\n      \r\n      // Call the onSubmit callback with the payment data and full payment status\r\n      onSubmit(date, paymentAmount, method, account, memo, paymentData, isFullPayment);\r\n      \r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error recording payment:', error);\r\n      message.error('Failed to record payment. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const cancelPayment = () => {\r\n    setShowConfirmation(false);\r\n  };\r\n\r\n  // Calculate if this is a full payment\r\n  const isFullPayment = parseFloat(enteredAmount) >= amount;\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        title={`Record Payment for Invoice ${invoiceId}`}\r\n        open={true}\r\n        onCancel={onClose}\r\n        footer={[\r\n          <Button key=\"cancel\" onClick={onClose}>\r\n            Close\r\n          </Button>\r\n        ]}\r\n      >\r\n        <div className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"text-gray-700\">Date</label>\r\n            <DatePicker \r\n              className=\"w-full\"\r\n              value={date}\r\n              onChange={(val) => setDate(val)}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label className=\"text-gray-700\">Amount</label>\r\n            <Input\r\n              value={enteredAmount} \r\n              onChange={(e) => setEnteredAmount(e.target.value)}\r\n              prefix={<span className=\"text-gray-500\">Rs</span>}\r\n            />\r\n            <div className=\"text-sm text-gray-500\">\r\n              Invoice amount: {formatCurrency(amount)} <br />\r\n              Remaining amount: {formatCurrency(amount - (parseFloat(enteredAmount) || 0))}\r\n              {isFullPayment && (\r\n                <div className=\"text-green-600 font-semibold mt-1\">\r\n                  This payment will complete the invoice.\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"text-gray-700\">Payment Method</label>\r\n            <Select value={method} onChange={setMethod} className=\"w-full\">\r\n              <Option value=\"cash\">Cash</Option>\r\n              <Option value=\"check\">Check</Option>\r\n              <Option value=\"eft\">Bank/Electronic Funds</Option>\r\n              <Option value=\"credit\">Credit Card</Option> \r\n            </Select>\r\n          </div>\r\n          <div>\r\n            <label className=\"text-gray-700\">Deposit Account</label>\r\n            <Select\r\n              value={account}\r\n              onChange={setAccount}\r\n              showSearch\r\n              filterOption={(input, option) =>\r\n                (option?.children ?? '').toLowerCase().includes(input.toLowerCase())\r\n              }\r\n              className=\"w-full\"\r\n            >\r\n              {accounts.map(parent =>\r\n                parent.children.length > 0 ? (\r\n                  <OptGroup key={parent.id} label={`${parent.code} - ${parent.name}`}>\r\n                    {parent.children.map(child => (\r\n                      <Option key={child.id} value={child.id}>\r\n                        {child.code} - {child.name}\r\n                      </Option>\r\n                    ))}\r\n                  </OptGroup>\r\n                ) : (\r\n                  <Option key={parent.id} value={parent.id}>\r\n                    {parent.code} - {parent.name}\r\n                  </Option>\r\n                )\r\n              )}\r\n            </Select>\r\n          </div>\r\n          <div>\r\n            <label className=\"text-gray-700\">Memo</label>\r\n            <Input.TextArea value={memo} onChange={(e) => setMemo(e.target.value)} />\r\n          </div>\r\n          \r\n          <Button \r\n            type=\"primary\"\r\n            className=\"mt-6\"\r\n            disabled={!date || !enteredAmount || !method || !account}\r\n            onClick={handleSubmit}\r\n            loading={loading}\r\n          >\r\n            {isFullPayment ? 'Complete Payment' : 'Record Payment'}\r\n          </Button>\r\n        </div>\r\n      </Modal>\r\n\r\n      {/* Confirmation Modal */}\r\n      <Modal\r\n        title={isFullPayment ? \"Complete Payment\" : \"Record Payment\"}\r\n        open={showConfirmation}\r\n        onOk={confirmPayment}\r\n        onCancel={cancelPayment}\r\n        okText={isFullPayment ? \"Complete Payment\" : \"Record Payment\"}\r\n        cancelText=\"Cancel\"\r\n      >\r\n        <div className=\"space-y-4\">\r\n          <p>Are you sure you want to {isFullPayment ? 'complete' : 'record'} this payment?</p>\r\n          <div className=\"bg-gray-50 p-3 rounded\">\r\n            <p><strong>Invoice:</strong> #{invoiceId}</p>\r\n            <p><strong>Amount:</strong> {formatCurrency(parseFloat(enteredAmount))}</p>\r\n            <p><strong>Method:</strong> {method}</p>\r\n            <p><strong>Date:</strong> {date ? date.format('YYYY-MM-DD') : 'N/A'}</p>\r\n            {isFullPayment && (\r\n              <p className=\"text-green-600 font-semibold\">\r\n                This payment will mark the invoice as fully paid.\r\n              </p>\r\n            )}\r\n          </div>\r\n          <p className=\"text-sm text-gray-500\">This action cannot be undone.</p>\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RecordPaymentModal;"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAMA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAC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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}